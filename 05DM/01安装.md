# DM数据库

# 一、安装

安装前准备工作

```shell
#!/bin/bash

# 创建用户
groupadd dinstall -g 2001
useradd  -G dinstall -m -d /home/dmdba -s /bin/bash -u 2001 dmdba
echo "yunJs@12" | passwd --stdin dmdba

# 修改dmdba的用户限制
cat >> /etc/security/limits.conf << EOF
dmdba  soft      nice       0
dmdba  hard      nice       0
dmdba  soft      as         unlimited
dmdba  hard      as         unlimited
dmdba  soft      fsize      unlimited
dmdba  hard      fsize      unlimited
dmdba  soft      nproc      65536
dmdba  hard      nproc      65536
dmdba  soft      nofile     65536
dmdba  hard      nofile     65536
dmdba  soft      core       unlimited
dmdba  hard      core       unlimited
dmdba  soft      data       unlimited
dmdba  hard      data       unlimited
EOF

# 目录规划
mkdir -p /dmdata/data 
mkdir -p /dmdata/arch
mkdir -p /dmdata/dmbak

chown -R dmdba:dinstall /dmdata/data
chown -R dmdba:dinstall /dmdata/arch
chown -R dmdba:dinstall /dmdata/dmbak

chmod -R 755 /dmdata/data
chmod -R 755 /dmdata/arch
chmod -R 755 /dmdata/dmbak

reboot
```

# 二、配置实例

```shell
su - dmdba
cd /home/dmdba/dmdbms/bin
./dminit path=/dmdata/data PAGE_SIZE=32 EXTENT_SIZE=32 CASE_SENSITIVE=y CHARSET=1 DB_NAME=DMTEST INSTANCE_NAME=DBSERVER PORT_NUM=5237 SYSDBA_PWD='yunJs@12'  SYSAUDITOR_PWD='yunJs@12'
```

# 三、注册服务

```shell
su - root
cd /home/dmdba/dmdbms/script/root/
./dm_service_installer.sh -t dmserver -dm_ini /dmdata/data/DMTEST/dm.ini -p DMTEST
```

# 四、启停数据库

```shell
[dmdba@localhost ~]$ cd /home/dmdba/dmdbms/bin
[dmdba@localhost bin]$ ls
[dmdba@localhost bin]$ ./DmServiceDMTEST start
[dmdba@localhost bin]$ ./DmServiceDMTEST stop
[dmdba@localhost bin]$ ./DmServiceDMTEST restart
[dmdba@localhost bin]$ ./DmServiceDMTEST status
```





